<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>
	/* 모달 창 스타일 */
	.modal {
	  display: none; /* 기본적으로 모달 창을 숨김 */
	  position: fixed;
	  z-index: 1;
	  left: 0;
	  top: 0;
	  width: 100%;
	  height: 100%;
	  overflow: auto;
	  background-color: rgba(0,0,0,0.4); /* 검은 배경, 투명도 */
	}
	
	.modal-content {
	  background-color: #fefefe;
	  margin: 15% auto;
	  padding: 20px;
	  border: 1px solid #888;
	  width: 80%;
	}
	
	.close {
	  color: #aaa;
	  float: right;
	  font-size: 28px;
	  font-weight: bold;
	}
	
	.close:hover,
	.close:focus {
	  color: black;
	  text-decoration: none;
	  cursor: pointer;
	}
	
	/* 상담사 리스트 스타일 */
	.consultant-box {
	  border: 1px solid #ddd;
	  padding: 10px;
	  margin: 10px 0;
	  border-radius: 5px;
	  background-color: #f9f9f9;
	  display: flex;
	  align-items: center;
	}
	
	.consultant-box img {
	  border-radius: 50%;
	  margin-right: 15px;
	  width: 80px;
	  height: 80px;
	}
	
	.consultant-info {
	  flex-grow: 1;
	}
	
	.consultant-info h3 {
	  margin: 0;
	  font-size: 1.2em;
	}
	
	.consultant-info p {
	  margin: 5px 0;
	}
	
	.consultant-box a {
	  text-decoration: none;
	  color: #007BFF;
	}
	
	.consultant-box a:hover {
	  text-decoration: underline;
	}
</style>
</head>
<body>
<h1>[[${memberId}]] 으로 로그인됨</h1>
<div>
  <input type="button" id="consultList" name="consultList" value="상담사 리스트 보기">
</div>

<div id="myModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>상담사 리스트</h2>
    <div id="consultantList">
      <!-- 상담사 리스트 항목들 -->
    </div>
  </div>
</div>

<script>
	var modal = document.getElementById("myModal");
	var btn = document.getElementById("consultList");
	var span = document.getElementsByClassName("close")[0];
	
	btn.onclick = function() {
	  modal.style.display = "block";
	  loadConsultants();
	}
	
	span.onclick = function() {
	  modal.style.display = "none";
	}
	
	window.onclick = function(event) {
	  if (event.target == modal) {
	    modal.style.display = "none";
	  }
	}
	
	//모달창에 상담사리스트 불러오기 요청
	function loadConsultants() {
	  fetch('/api/consultants')
	    .then(response => response.json())
	    .then(data => {
	      const consultantList = document.getElementById('consultantList');
	      consultantList.innerHTML = '';
	      data.forEach(consultant => {
	        const consultantBox = document.createElement('div');
	        consultantBox.className = 'consultant-box';
	        
	        const img = document.createElement('img');
	        img.src = consultant.imageUrl;
	        img.alt = `상담사 ${consultant.name} 사진`;
	        
	        const consultantInfo = document.createElement('div');
	        consultantInfo.className = 'consultant-info';
	        
	        const name = document.createElement('h3');
	        name.textContent = consultant.name + ' 상담사';
	        
	        const subject = document.createElement('p');
	        subject.textContent = `상담과목: ${consultant.subject}`;
	        
	        const description = document.createElement('p');
	        description.textContent = `소개: ${consultant.description}`;
	        
	        const link = document.createElement('a');
	        link.href = `/reservationBoard?consultant=${consultant.id}`;
	        link.textContent = '예약하기';
	        
	        consultantInfo.appendChild(name);
	        consultantInfo.appendChild(subject);
	        consultantInfo.appendChild(description);
	        consultantBox.appendChild(img);
	        consultantBox.appendChild(consultantInfo);
	        consultantBox.appendChild(link);
	        
	        consultantList.appendChild(consultantBox);
	      });
	    });
	}
</script>

</body>
</html>